(this["webpackJsonpphase-2-project"]=this["webpackJsonpphase-2-project"]||[]).push([[0],{140:function(e){e.exports=JSON.parse('{"API_KEY":"ELE5OMMAI6VJWEWB"}')},277:function(e,t){},279:function(e,t){},290:function(e,t){},292:function(e,t){},319:function(e,t){},321:function(e,t){},322:function(e,t){},327:function(e,t){},329:function(e,t){},335:function(e,t){},337:function(e,t){},356:function(e,t){},368:function(e,t){},371:function(e,t){},377:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),c=s(72),r=s.n(c),o=s(96),i=s(13),u=s(16),l=(s(263),s(394)),j=s(3),d=a.a.createContext();function b(e){var t=e.children,s=Object(n.useState)({isLoggedIn:!1,id:null,username:null,password:null,stocks:[]}),a=Object(i.a)(s,2),c=a[0],r=a[1];return Object(j.jsx)(d.Provider,{value:[c,r],children:t})}var O=function(e){var t=Object(n.useState)(""),s=Object(i.a)(t,2),a=s[0],c=s[1];function r(e){var t=e.target.id;c(t)}var u=Object(n.useContext)(d),b=Object(i.a)(u,1)[0];return Object(j.jsx)("div",{children:Object(j.jsx)(l.a,{children:e.links.map((function(e,t){return e.loggedInRequired&&b.isLoggedIn?Object(j.jsx)(l.a.Item,{id:e.name,active:a===e.name,as:o.b,exact:!0,to:e.path,onClick:r,children:e.name.toUpperCase()},t):e.loggedInRequired?null:Object(j.jsx)(l.a.Item,{id:e.name,active:a===e.name,as:o.b,exact:!0,to:e.path,onClick:r,children:e.name.toUpperCase()},t)}))})})},h=s(15),m=s(18),p=s(14),f=s(393),x=s(400),g=s(395),w=s(378),v=s(183);var k=function(e){var t=Object(n.useState)({username:"",password:"",passwordConfirmation:"",requirePassword:!1,status:"",message:""}),s=Object(i.a)(t,2),a=s[0],c=s[1],r=e.usernameList;function o(e){var t=e.target.name,s=e.target.value;c(Object(p.a)(Object(p.a)({},a),{},Object(m.a)({},t,s)))}function u(e,t){c(Object(p.a)(Object(p.a)({},a),{},{status:e,message:t}))}return Object(j.jsxs)(f.a,{onSubmit:function(t){if(t.preventDefault(),0===a.username.length)u("warning","Please enter 1 or more character(s) for the username");else if(r.find((function(e){return e===a.username})))u("warning","User exists!");else if(a.requirePassword&&a.password!==a.passwordConfirmation)u("warning","Passwords does not match!");else{c(Object(p.a)(Object(p.a)({},a),{},{message:""}));var s=a.requirePassword?v(a.password,"SALTY-CHIPS"):"";fetch("https://dry-lowlands-31397.herokuapp.com/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.username,password:s,stocks:[]})}).then((function(e){if("Created"===e.statusText)return c({username:"",password:"",passwordConfirmation:"",requirePassword:!1,status:"success",message:"Your watchlist has been successfully created."}),e.json()})).then((function(t){e.setUserList([].concat(Object(h.a)(e.userList),[t]))}))}},warning:"warning"===a.status,success:"success"===a.status,children:[Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Create a New Watchlist by Username:"}),Object(j.jsx)("input",{name:"username",placeholder:"Username",value:a.username,onChange:o})]}),Object(j.jsx)(f.a.Field,{children:Object(j.jsx)(x.a,{label:"Use password (optional)",name:"requirePassword",onClick:function(){c(Object(p.a)(Object(p.a)({},a),{},{requirePassword:!a.requirePassword}))},checked:a.requirePassword})}),a.requirePassword?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Password: "}),Object(j.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:a.password,onChange:o})]}),Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Confirm Password:"}),Object(j.jsx)("input",{name:"passwordConfirmation",type:"password",placeholder:"Re-Enter Password",value:a.passwordConfirmation,onChange:o})]})]}):null,a.status?Object(j.jsx)(g.a,{warning:"warning"===a.status,success:"success"===a.status,list:[a.message]}):null,Object(j.jsx)(w.a,{type:"submit",color:"green",children:"Create"})]})},C=s(183);var S=function(e){var t=Object(n.useState)({password:"",message:"",status:""}),s=Object(i.a)(t,2),a=s[0],c=s[1],r=Object(n.useState)({id:null,username:"",password:"",stocks:[]}),o=Object(i.a)(r,2),u=o[0],l=o[1],b=e.userList,O=Object(n.useContext)(d),h=Object(i.a)(O,2),x=(h[0],h[1]);return Object(j.jsxs)(f.a,{onSubmit:function(e){if(e.preventDefault(),null===u.id)return null;var t=C(a.password,"SALTY-CHIPS");u.password.length>0&&u.password!==t?c(Object(p.a)(Object(p.a)({},a),{},{status:"warning",message:"Invalid Password"})):x({id:u.id,username:u.username,password:u.password,stocks:u.stocks,isLoggedIn:!0})},warning:"warning"===a.status,children:[Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Load Watchlist by Username:"}),Object(j.jsxs)("select",{onChange:function(e){var t=e.target.value;l(b.find((function(e){return e.id==t}))),c(Object(p.a)(Object(p.a)({},a),{},{password:"",status:"",message:""}))},children:[Object(j.jsx)("option",{selected:!0,value:0,disabled:!0}),b.map((function(e,t){return Object(j.jsx)("option",{name:"id",value:e.id,children:e.username},t)}))]})]}),u.password?Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:a.password,onChange:function(e){var t=e.target.name,s=e.target.value;c(Object(p.a)(Object(p.a)({},a),{},Object(m.a)({},t,s)))}})]}):null,Object(j.jsx)(w.a,{type:"submit",color:"blue",children:"Load Watchlist"}),a.status?Object(j.jsx)(g.a,{warning:"warning"===a.status,list:[a.message]}):null]})},y=s(397),P=s(398),I=s(391),L=s(392);var T=function(){var e,t=Object(n.useState)([]),s=Object(i.a)(t,2),a=s[0],c=s[1];return Object(n.useEffect)((function(){fetch("https://dry-lowlands-31397.herokuapp.com/users").then((function(e){return e.json()})).then((function(t){return e=t.map((function(e){return{id:e.id,username:e.username,password:e.password,stocks:e.stocks}}))})).finally((function(){c(e.map((function(e){return{id:e.id,username:e.username,password:e.password,stocks:e.stocks}})))})).catch((function(e){return console.error(e)}))}),[]),[a,c]};var E=function(){var e=Object(n.useContext)(d),t=Object(i.a)(e,1)[0],s=T(),a=Object(i.a)(s,2),c=a[0],r=a[1],o=c.map((function(e){return e.username}));return Object(j.jsx)(y.a,{centered:!0,columns:3,children:Object(j.jsx)(y.a.Column,{children:Object(j.jsxs)(P.a,{children:[t.isLoggedIn?null:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(I.a,{position:"left",children:Object(j.jsx)(P.a,{children:Object(j.jsx)(k,{usernameList:o,setUserList:r,userList:c})})}),Object(j.jsx)(I.a,{position:"right",children:Object(j.jsx)(P.a,{children:Object(j.jsx)(S,{userList:c})})})]}),Object(j.jsx)("h3",{children:Object(j.jsx)("i",{children:"Flatiron School - SE Flex - Phase 2 - Watchlist App"})}),Object(j.jsx)(L.a,{horizontal:!0,children:"o"}),Object(j.jsx)("div",{children:t.isLoggedIn?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{children:["Welcome back: ",t.username]}),Object(j.jsx)("br",{}),"You are currently watching:",Object(j.jsx)("ul",{children:t.stocks.map((function(e,t){return Object(j.jsx)("li",{children:e},t)}))})]}):Object(j.jsx)("p",{children:"Create a new watchlist or select an existing watchlist!"})})]})})})},q=s(399),A=s(390),N=s(243),R=s(140),W=s(245),F=s(20),D=s(246);var U=function(e){F.d.register(F.c,F.i,F.k,F.h,F.o,F.p,F.f);var t={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"".concat(e.stockName," - Time Series Chart - INTRADAY (5min)")}}},s={labels:Object(h.a)(e.labels),datasets:[{label:"".concat(e.stockName),data:Object(h.a)(e.data),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return Object(j.jsx)(D.a,{options:t,data:s})};var M=function(e){return Object(j.jsxs)(W.a,{children:[Object(j.jsx)(W.a.Content,{children:e.stock["Meta Data"]["2. Symbol"]}),Object(j.jsx)(W.a.Content,{children:Object(j.jsx)(U,{stockName:e.stock["Meta Data"]["2. Symbol"],labels:Object.keys(e.stock["Time Series (5min)"]).map((function(e){return e.split(" ")[1]})).reverse(),data:Object.keys(e.stock["Time Series (5min)"]).map((function(t){return e.stock["Time Series (5min)"]["".concat(t)]["4. close"]})).reverse()})}),Object(j.jsx)(W.a.Content,{extra:!0,children:Object(j.jsx)(w.a,{basic:!0,color:"red",onClick:function(){return e.removeStock(e.stock["Meta Data"]["2. Symbol"])},children:"Remove Stock from Watchlist"})})]})};var Y=function(){var e=Object(n.useContext)(d),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)([]),r=Object(i.a)(c,2),o=r[0],u=r[1],l=Object(n.useState)(""),b=Object(i.a)(l,2),O=b[0],m=b[1];Object(n.useEffect)((function(){var e=[],t="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&interval=5min&apikey=".concat(R,"&symbol=");try{Promise.all(s.stocks.map((function(e){return fetch(t+e).then((function(e){return e.json()})).then((function(e){return e}))}))).then((function(t){return e.push(t)})).then((function(){u(Object(h.a)(e[0]))}))}catch(n){console.error(n)}}),[s.stocks]);var f=o.filter((function(e){return e["Meta Data"]["2. Symbol"].toLowerCase().includes(O.toLowerCase())}));function x(e){var t=s.stocks.filter((function(t){return t!==e}));fetch("https://dry-lowlands-31397.herokuapp.com/users/".concat(s.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,username:s.username,password:s.password,stocks:Object(h.a)(t)})}),a(Object(p.a)(Object(p.a)({},s),{},{stocks:Object(h.a)(t)}))}return Object(j.jsxs)(P.a,{children:[Object(j.jsx)(q.a,{as:"h3",textAlign:"center",content:"Watchlist Page"}),Object(j.jsx)(A.a,{icon:"search",placeholder:"Filter stocks to display... ",value:O,onChange:function(e){return m(e.target.value)}}),Object(j.jsx)(L.a,{horizontal:!0}),f!==[]?Object(j.jsx)(N.a,{centered:!0,itemsPerRow:2,children:f.map((function(e,t){return Object(j.jsx)(M,{stock:e,removeStock:x},t)}))}):Object(j.jsx)("p",{children:"Your watchlist is currently empty!"})]})};var H=function(e){var t=Object(n.useState)(null),s=Object(i.a)(t,2),a=s[0],c=s[1],r=Object(n.useState)(null),o=Object(i.a)(r,2),u=o[0],l=o[1];return Object(n.useEffect)((function(){if(""===e)return null;var t="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&interval=5min&apikey=".concat(R,"&symbol=");fetch(t+e).then((function(e){return e.json()})).then((function(e){c(e),l(e["Meta Data"]["2. Symbol"])}))}),[e]),[a,u]};var J=function(){var e=Object(n.useContext)(d),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(""),r=Object(i.a)(c,2),o=r[0],u=r[1],l=H(o),b=Object(i.a)(l,2),O=b[0],m=b[1],f=Object(n.useState)(!1),x=Object(i.a)(f,2),v=x[0],k=x[1],C=Object(n.useState)(""),S=Object(i.a)(C,2),y=S[0],I=S[1],L=Object(n.useState)({message:"",status:"",color:""}),T=Object(i.a)(L,2),E=T[0],q=T[1],N="https://dry-lowlands-31397.herokuapp.com/users/".concat(s.id);return Object(j.jsx)(P.a,{children:Object(j.jsxs)(W.a,{centered:!0,color:"olive",fluid:v,children:[Object(j.jsx)(W.a.Header,{textAlign:"center",children:Object(j.jsxs)(A.a,{action:!0,placeholder:"Enter Stock Name Here...",fluid:!0,value:y,onChange:function(e){return I(e.target.value.toUpperCase())},children:[Object(j.jsx)("input",{}),Object(j.jsx)(w.a,{basic:!0,color:"green",onClick:function(){if(""===y)return null;u(y),q({message:"",status:"",color:""})},children:"Search"})]})}),O?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(U,{stockName:m,labels:Object.keys(O["Time Series (5min)"]).map((function(e){return e.split(" ")[1]})).reverse(),data:Object.keys(O["Time Series (5min)"]).map((function(e){return O["Time Series (5min)"]["".concat(e)]["4. close"]})).reverse()}),Object(j.jsx)(W.a.Content,{textAlign:"center"}),Object(j.jsx)(W.a.Content,{extra:!0,children:Object(j.jsxs)("div",{className:"ui two buttons",children:[Object(j.jsx)(w.a,{basic:!0,color:"green",name:"searchBtn",onClick:function(){if(s.stocks.find((function(e){return e.toLowerCase()===m.toLowerCase()})))return q({message:"".concat(m," is already in your Watchlist"),status:"Warning:",color:"red"}),null;fetch(N,{headers:{"Content-Type":"application/json"},method:"PATCH",body:JSON.stringify({stocks:[].concat(Object(h.a)(s.stocks),[m])})}).then((function(){a(Object(p.a)(Object(p.a)({},s),{},{stocks:[].concat(Object(h.a)(s.stocks),[m])})),q({message:"".concat(m," was successfully added to the Watchlist"),status:"Success:",color:"olive"})})).catch((function(e){return console.error(e)}))},children:"Add Stock to Watchlist"}),Object(j.jsx)(w.a,{basic:!0,color:"grey",onClick:function(){return k(!v)},children:v?"Collapse":"Expand"})]})}),E.message?Object(j.jsxs)(g.a,{color:E.color,children:[Object(j.jsx)(g.a.Header,{children:E.status}),Object(j.jsx)("p",{children:E.message})]}):null]}):null]})})};var _=function(){var e=[{name:"home",path:"/",loggedInRequired:!1,component:E},{name:"watchlist",path:"/watchlist",loggedInRequired:!0,component:Y},{name:"stock",path:"/stock",loggedInRequired:!0,component:J}],t=Object(n.useContext)(d),s=Object(i.a)(t,1)[0];return Object(j.jsxs)("div",{children:[Object(j.jsx)(O,{links:e}),Object(j.jsx)(L.a,{horizontal:!0}),Object(j.jsx)(u.c,{children:e.map((function(e,t){return Object(j.jsx)(u.a,{exact:!0,path:e.path,component:e.component,children:e.loggedInRequired&&s.isLoggedIn?null:Object(j.jsx)(E,{})},t)}))})]})};r.a.render(Object(j.jsx)(o.a,{basename:"/Watchlist",children:Object(j.jsx)(b,{children:Object(j.jsx)(_,{})})}),document.getElementById("root"))}},[[377,1,2]]]);
//# sourceMappingURL=main.44ec77fd.chunk.js.map