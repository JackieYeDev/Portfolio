(this["webpackJsonpphase-2-project"]=this["webpackJsonpphase-2-project"]||[]).push([[0],{140:function(e){e.exports=JSON.parse('{"API_KEY":"ELE5OMMAI6VJWEWB"}')},277:function(e,t){},279:function(e,t){},290:function(e,t){},292:function(e,t){},319:function(e,t){},321:function(e,t){},322:function(e,t){},327:function(e,t){},329:function(e,t){},335:function(e,t){},337:function(e,t){},356:function(e,t){},368:function(e,t){},371:function(e,t){},377:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),c=n(72),r=n.n(c),o=n(96),i=n(13),l=n(16),u=(n(263),n(394)),j=n(3),d=a.a.createContext();function b(e){var t=e.children,n=Object(s.useState)({isLoggedIn:!1,id:null,username:null,password:null,stocks:[]}),a=Object(i.a)(n,2),c=a[0],r=a[1];return Object(j.jsx)(d.Provider,{value:[c,r],children:t})}var O=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),a=n[0],c=n[1];function r(e){var t=e.target.id;c(t)}var l=Object(s.useContext)(d),b=Object(i.a)(l,1)[0];return Object(j.jsx)("div",{children:Object(j.jsx)(u.a,{children:e.links.map((function(e,t){return e.loggedInRequired&&b.isLoggedIn?Object(j.jsx)(u.a.Item,{id:e.name,active:a===e.name,as:o.b,exact:!0,to:e.path,onClick:r,children:e.name.toUpperCase()},t):e.loggedInRequired?null:Object(j.jsx)(u.a.Item,{id:e.name,active:a===e.name,as:o.b,exact:!0,to:e.path,onClick:r,children:e.name.toUpperCase()},t)}))})})},h=n(15),p=n(18),m=n(14),f=n(393),x=n(400),g=n(395),w=n(378),v=n(183);var k=function(e){var t=Object(s.useState)({username:"",password:"",passwordConfirmation:"",requirePassword:!1,status:"",message:""}),n=Object(i.a)(t,2),a=n[0],c=n[1],r=e.usernameList;function o(e){var t=e.target.name,n=e.target.value;c(Object(m.a)(Object(m.a)({},a),{},Object(p.a)({},t,n)))}function l(e,t){c(Object(m.a)(Object(m.a)({},a),{},{status:e,message:t}))}return Object(j.jsxs)(f.a,{onSubmit:function(t){if(t.preventDefault(),0===a.username.length)l("warning","Please enter 1 or more character(s) for the username");else if(r.find((function(e){return e===a.username})))l("warning","User exists!");else if(a.requirePassword&&a.password!==a.passwordConfirmation)l("warning","Passwords does not match!");else{c(Object(m.a)(Object(m.a)({},a),{},{message:""}));var n=a.requirePassword?v(a.password,"SALTY-CHIPS"):"";fetch("https://dry-lowlands-31397.herokuapp.com/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.username,password:n,stocks:[]})}).then((function(e){if("Created"===e.statusText)return c({username:"",password:"",passwordConfirmation:"",requirePassword:!1,status:"success",message:"Your portfolio has been successfully created."}),e.json()})).then((function(t){e.setUserList([].concat(Object(h.a)(e.userList),[t]))}))}},warning:"warning"===a.status,success:"success"===a.status,children:[Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Create New Portfolio by Username:"}),Object(j.jsx)("input",{name:"username",placeholder:"Username",value:a.username,onChange:o})]}),Object(j.jsx)(f.a.Field,{children:Object(j.jsx)(x.a,{label:"Use password (optional)",name:"requirePassword",onClick:function(){c(Object(m.a)(Object(m.a)({},a),{},{requirePassword:!a.requirePassword}))},checked:a.requirePassword})}),a.requirePassword?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Password: "}),Object(j.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:a.password,onChange:o})]}),Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Confirm Password:"}),Object(j.jsx)("input",{name:"passwordConfirmation",type:"password",placeholder:"Re-Enter Password",value:a.passwordConfirmation,onChange:o})]})]}):null,a.status?Object(j.jsx)(g.a,{warning:"warning"===a.status,success:"success"===a.status,list:[a.message]}):null,Object(j.jsx)(w.a,{type:"submit",color:"green",children:"Create"})]})};var C=function(){var e,t=Object(s.useState)([]),n=Object(i.a)(t,2),a=n[0],c=n[1];return Object(s.useEffect)((function(){fetch("https://dry-lowlands-31397.herokuapp.com/users").then((function(e){return e.json()})).then((function(t){return e=t.map((function(e){return{id:e.id,username:e.username,password:e.password,stocks:e.stocks}}))})).finally((function(){c(e.map((function(e){return{id:e.id,username:e.username,password:e.password,stocks:e.stocks}})))})).catch((function(e){return console.error(e)}))}),[]),[a,c]},y=n(183);var S=function(e){var t=Object(s.useState)({password:""}),n=Object(i.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)({id:null,username:"",password:"",stocks:[]}),o=Object(i.a)(r,2),l=o[0],u=o[1],b=e.userList,O=Object(s.useContext)(d),h=Object(i.a)(O,2),x=(h[0],h[1]);return Object(j.jsxs)(f.a,{onSubmit:function(e){if(e.preventDefault(),null===l.id)return null;var t=y(a.password,"SALTY-CHIPS");l.password.length>0&&l.password!==t?console.error("Invalid password"):x({id:l.id,username:l.username,password:l.password,stocks:l.stocks,isLoggedIn:!0})},children:[Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Load Portfolio by Username:"}),Object(j.jsxs)("select",{onChange:function(e){var t=e.target.value;u(b.find((function(e){return e.id==t})))},children:[Object(j.jsx)("option",{selected:!0,value:0,disabled:!0}),b.map((function(e,t){return Object(j.jsx)("option",{name:"id",value:e.id,children:e.username},t)}))]})]}),l.password?Object(j.jsxs)(f.a.Field,{children:[Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:a.password,onChange:function(e){var t=e.target.name,n=e.target.value;c(Object(m.a)(Object(m.a)({},a),{},Object(p.a)({},t,n)))}})]}):null,Object(j.jsx)(w.a,{type:"submit",color:"blue",children:"Load Portfolio"})]})},P=n(397),I=n(398),L=n(391),T=n(392);var E=function(){var e=Object(s.useContext)(d),t=Object(i.a)(e,1)[0],n=C(),a=Object(i.a)(n,2),c=a[0],r=a[1],o=c.map((function(e){return e.username}));return Object(j.jsx)(P.a,{centered:!0,columns:3,children:Object(j.jsx)(P.a.Column,{children:Object(j.jsxs)(I.a,{children:[t.isLoggedIn?null:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(L.a,{position:"left",children:Object(j.jsx)(I.a,{children:Object(j.jsx)(k,{usernameList:o,setUserList:r,userList:c})})}),Object(j.jsx)(L.a,{position:"right",children:Object(j.jsx)(I.a,{children:Object(j.jsx)(S,{userList:c})})})]}),Object(j.jsx)("h3",{children:Object(j.jsx)("i",{children:"Flatiron School - SE Flex - Phase 2 - Watchlist App"})}),Object(j.jsx)(T.a,{horizontal:!0,children:"o"}),Object(j.jsx)("div",{children:t.isLoggedIn?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{children:["Welcome back: ",t.username]}),Object(j.jsx)("br",{}),"You are currently watching:",Object(j.jsx)("ul",{children:t.stocks.map((function(e,t){return Object(j.jsx)("li",{children:e},t)}))})]}):Object(j.jsx)("p",{children:"Create a new portfolio or select an existing portfolio!"})})]})})})},q=n(399),A=n(390),F=n(243),N=n(140),R=n(245),W=n(20),D=n(246);var U=function(e){W.d.register(W.c,W.i,W.k,W.h,W.o,W.p,W.f);var t={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"".concat(e.stockName," - Time Series Chart - INTRADAY (5min)")}}},n={labels:Object(h.a)(e.labels),datasets:[{label:"".concat(e.stockName),data:Object(h.a)(e.data),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return Object(j.jsx)(D.a,{options:t,data:n})};var M=function(e){return Object(j.jsxs)(R.a,{children:[Object(j.jsx)(R.a.Content,{children:e.stock["Meta Data"]["2. Symbol"]}),Object(j.jsx)(R.a.Content,{children:Object(j.jsx)(U,{stockName:e.stock["Meta Data"]["2. Symbol"],labels:Object.keys(e.stock["Time Series (5min)"]).map((function(e){return e.split(" ")[1]})).reverse(),data:Object.keys(e.stock["Time Series (5min)"]).map((function(t){return e.stock["Time Series (5min)"]["".concat(t)]["4. close"]})).reverse()})}),Object(j.jsx)(R.a.Content,{extra:!0,children:Object(j.jsx)(w.a,{basic:!0,color:"red",onClick:function(){return e.removeStock(e.stock["Meta Data"]["2. Symbol"])},children:"Remove Stock from Watchlist"})})]})};var Y=function(){var e=Object(s.useContext)(d),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)([]),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(s.useState)(""),b=Object(i.a)(u,2),O=b[0],p=b[1];Object(s.useEffect)((function(){var e=[],t="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&interval=5min&apikey=".concat(N,"&symbol=");try{Promise.all(n.stocks.map((function(e){return fetch(t+e).then((function(e){return e.json()})).then((function(e){return e}))}))).then((function(t){return e.push(t)})).then((function(){l(Object(h.a)(e[0]))}))}catch(s){console.error(s)}}),[n.stocks]);var f=o.filter((function(e){return e["Meta Data"]["2. Symbol"].toLowerCase().includes(O.toLowerCase())}));function x(e){var t=n.stocks.filter((function(t){return t!==e}));fetch("https://dry-lowlands-31397.herokuapp.com/users/".concat(n.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id,username:n.username,password:n.password,stocks:Object(h.a)(t)})}),a(Object(m.a)(Object(m.a)({},n),{},{stocks:Object(h.a)(t)}))}return Object(j.jsxs)(I.a,{children:[Object(j.jsx)(q.a,{as:"h3",textAlign:"center",content:"Watchlist Page"}),Object(j.jsx)(A.a,{icon:"search",placeholder:"Filter stocks to display... ",value:O,onChange:function(e){return p(e.target.value)}}),Object(j.jsx)(T.a,{horizontal:!0}),f!==[]?Object(j.jsx)(F.a,{centered:!0,itemsPerRow:2,children:f.map((function(e,t){return Object(j.jsx)(M,{stock:e,removeStock:x},t)}))}):Object(j.jsx)("p",{children:"Your watchlist is currently empty!"})]})};var H=function(e){var t=Object(s.useState)(null),n=Object(i.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(null),o=Object(i.a)(r,2),l=o[0],u=o[1];return Object(s.useEffect)((function(){if(""===e)return null;var t="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&interval=5min&apikey=".concat(N,"&symbol=");fetch(t+e).then((function(e){return e.json()})).then((function(e){c(e),u(e["Meta Data"]["2. Symbol"])}))}),[e]),[a,l]};var J=function(){var e=Object(s.useContext)(d),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),r=Object(i.a)(c,2),o=r[0],l=r[1],u=H(o),b=Object(i.a)(u,2),O=b[0],p=b[1],f=Object(s.useState)(!1),x=Object(i.a)(f,2),v=x[0],k=x[1],C=Object(s.useState)(""),y=Object(i.a)(C,2),S=y[0],P=y[1],I=Object(s.useState)({message:"",status:"",color:""}),L=Object(i.a)(I,2),T=L[0],E=L[1];function q(e){return"Enter"!==e.key||""===S?null:void l(S)}var F="https://dry-lowlands-31397.herokuapp.com/users/".concat(n.id);return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(R.a,{centered:!0,color:"olive",fluid:v,children:[Object(j.jsx)(R.a.Header,{textAlign:"center",children:Object(j.jsxs)(A.a,{action:!0,onKeyPress:q,placeholder:"Enter Stock Name Here...",fluid:!0,value:S,onChange:function(e){return P(e.target.value.toUpperCase())},children:[Object(j.jsx)("input",{}),Object(j.jsx)(w.a,{basic:!0,color:"green",onClick:q,children:"Search"})]})}),O?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(U,{stockName:p,labels:Object.keys(O["Time Series (5min)"]).map((function(e){return e.split(" ")[1]})).reverse(),data:Object.keys(O["Time Series (5min)"]).map((function(e){return O["Time Series (5min)"]["".concat(e)]["4. close"]})).reverse()}),Object(j.jsx)(R.a.Content,{textAlign:"center"}),Object(j.jsx)(R.a.Content,{extra:!0,children:Object(j.jsxs)("div",{className:"ui two buttons",children:[Object(j.jsx)(w.a,{basic:!0,color:"green",onClick:function(){if(n.stocks.find((function(e){return e.toLowerCase()===p.toLowerCase()})))return E({message:"".concat(p," is already in your Watchlist"),status:"Warning:",color:"red"}),null;fetch(F,{headers:{"Content-Type":"application/json"},method:"PATCH",body:JSON.stringify({stocks:[].concat(Object(h.a)(n.stocks),[p])})}).then((function(){a(Object(m.a)(Object(m.a)({},n),{},{stocks:[].concat(Object(h.a)(n.stocks),[p])})),E({message:"".concat(p," was successfully added to the Watchlist"),status:"Success:",color:"olive"})})).catch((function(e){return console.error(e)}))},children:"Add Stock to Watchlist"}),Object(j.jsx)(w.a,{basic:!0,color:"grey",onClick:function(){return k(!v)},children:v?"Collapse":"Expand"})]})}),T.message?Object(j.jsxs)(g.a,{color:T.color,children:[Object(j.jsx)(g.a.Header,{children:T.status}),Object(j.jsx)("p",{children:T.message})]}):null]}):null]})})};var _=function(){var e=[{name:"home",path:"/",loggedInRequired:!1,component:E},{name:"watchlist",path:"/watchlist",loggedInRequired:!0,component:Y},{name:"stock",path:"/stock",loggedInRequired:!0,component:J}],t=Object(s.useContext)(d),n=Object(i.a)(t,1)[0];return Object(j.jsxs)("div",{children:[Object(j.jsx)(O,{links:e}),Object(j.jsx)(T.a,{horizontal:!0}),Object(j.jsx)(l.c,{children:e.map((function(e,t){return Object(j.jsx)(l.a,{exact:!0,path:e.path,component:e.component,children:e.loggedInRequired&&n.isLoggedIn?null:Object(j.jsx)(E,{})},t)}))})]})};r.a.render(Object(j.jsx)(o.a,{basename:"/Watchlist",children:Object(j.jsx)(b,{children:Object(j.jsx)(_,{})})}),document.getElementById("root"))}},[[377,1,2]]]);
//# sourceMappingURL=main.ad6ca6e7.chunk.js.map