(this["webpackJsonpphase-2-project"]=this["webpackJsonpphase-2-project"]||[]).push([[0],{140:function(e){e.exports=JSON.parse('{"API_KEY":"ELE5OMMAI6VJWEWB"}')},280:function(e,t){},282:function(e,t){},293:function(e,t){},295:function(e,t){},322:function(e,t){},324:function(e,t){},325:function(e,t){},330:function(e,t){},332:function(e,t){},338:function(e,t){},340:function(e,t){},359:function(e,t){},371:function(e,t){},374:function(e,t){},377:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(71),c=n.n(a),o=n(95),i=n(13),l=n(16),u=(n(263),n(394)),j=n(390),d=n(3),b=r.a.createContext();function O(e){var t=e.children,n=Object(s.useState)({isLoggedIn:!1,id:null,username:null,password:null,stocks:[]}),r=Object(i.a)(n,2),a=r[0],c=r[1];return Object(d.jsx)(b.Provider,{value:[a,c],children:t})}var h=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),r=n[0],a=n[1];function c(e){var t=e.target.id;a(t)}var l=Object(s.useContext)(b),O=Object(i.a)(l,1)[0];return Object(d.jsx)("div",{children:Object(d.jsxs)(u.a,{children:[e.links.map((function(e,t){return e.loggedInRequired&&O.isLoggedIn?Object(d.jsx)(u.a.Item,{id:e.name,active:r===e.name,as:o.b,exact:!0,to:e.path,onClick:c,children:e.name.toUpperCase()},t):e.loggedInRequired?null:Object(d.jsx)(u.a.Item,{id:e.name,active:r===e.name,as:o.b,exact:!0,to:e.path,onClick:c,children:e.name.toUpperCase()},t)})),O.isLoggedIn&&"portfolio"===r?Object(d.jsx)(u.a.Menu,{position:"right",children:Object(d.jsx)(u.a.Item,{children:Object(d.jsx)(j.a,{icon:"search",placeholder:"Search..."})})}):null]})})},p=n(15),m=n(18),f=n(14),x=n(393),g=n(399),w=n(395),v=n(378);var S=function(e){var t,n=Object(s.useState)([]),r=Object(i.a)(n,2),a=r[0],c=r[1];return Object(s.useEffect)((function(){fetch("https://dry-lowlands-31397.herokuapp.com/users").then((function(e){return e.json()})).then((function(e){return t=e.map((function(e){return{id:e.id,username:e.username,password:e.password,stocks:e.stocks}}))})).finally((function(){switch(e){case"USERNAMES":c(t.map((function(e){return{username:e.username}})));break;case"USER-LIST":c(t.map((function(e){return{id:e.id,username:e.username,password:e.password,stocks:e.stocks}})));break;default:console.error("Something went wrong!")}})).catch((function(e){return console.error(e)}))}),[]),[a,c]},k=n(184);var C=function(){var e=Object(s.useState)({username:"",password:"",passwordConfirmation:"",requirePassword:!1,status:"",message:""}),t=Object(i.a)(e,2),n=t[0],r=t[1],a=S("USERNAMES"),c=Object(i.a)(a,2),o=c[0],l=c[1];function u(e){var t=e.target.name,s=e.target.value;r(Object(f.a)(Object(f.a)({},n),{},Object(m.a)({},t,s)))}function j(e,t){r(Object(f.a)(Object(f.a)({},n),{},{status:e,message:t}))}return Object(d.jsxs)(x.a,{onSubmit:function(e){if(e.preventDefault(),0===n.username.length)j("warning","Please enter 1 or more character(s) for the username");else if(o.find((function(e){return e.username===n.username})))j("warning","User exists!");else if(n.requirePassword&&n.password!==n.passwordConfirmation)j("warning","Passwords does not match!");else{r(Object(f.a)(Object(f.a)({},n),{},{message:""}));var t=n.requirePassword?k(n.password,"SALTY-CHIPS"):"";fetch("https://dry-lowlands-31397.herokuapp.com/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,password:t,stocks:[]})}).then((function(e){if("Created"===e.statusText)return r({username:"",password:"",passwordConfirmation:"",requirePassword:!1,status:"success",message:"Your portfolio has been successfully created."}),e.json()})).then((function(e){return l([].concat(Object(p.a)(o),[e.username]))}))}},warning:"warning"===n.status,success:"success"===n.status,children:[Object(d.jsxs)(x.a.Field,{children:[Object(d.jsx)("label",{children:"Portfolio by Username:"}),Object(d.jsx)("input",{name:"username",placeholder:"Username",value:n.username,onChange:u})]}),Object(d.jsx)(x.a.Field,{children:Object(d.jsx)(g.a,{label:"Use password (optional)",name:"requirePassword",onClick:function(){r(Object(f.a)(Object(f.a)({},n),{},{requirePassword:!n.requirePassword}))},checked:n.requirePassword})}),n.requirePassword?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(x.a.Field,{children:[Object(d.jsx)("label",{children:"Password: "}),Object(d.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:n.password,onChange:u})]}),Object(d.jsxs)(x.a.Field,{children:[Object(d.jsx)("label",{children:"Confirm Password:"}),Object(d.jsx)("input",{name:"passwordConfirmation",type:"password",placeholder:"Re-Enter Password",value:n.passwordConfirmation,onChange:u})]})]}):null,n.status?Object(d.jsx)(w.a,{warning:"warning"===n.status,success:"success"===n.status,list:[n.message]}):null,Object(d.jsx)(v.a,{type:"submit",color:"green",children:"Create"})]})},y=n(184);var P=function(){var e=Object(s.useState)({password:""}),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)({id:null,username:"",password:"",stocks:[]}),c=Object(i.a)(a,2),o=c[0],l=c[1],u=S("USER-LIST"),j=Object(i.a)(u,2),O=j[0],h=(j[1],Object(s.useContext)(b)),p=Object(i.a)(h,2),g=(p[0],p[1]);return Object(d.jsxs)(x.a,{onSubmit:function(e){if(e.preventDefault(),null===o.id)return null;var t=y(n.password,"SALTY-CHIPS");o.password.length>0&&o.password!==t?console.error("Invalid password"):g({id:o.id,username:o.username,password:o.password,stocks:o.stocks,isLoggedIn:!0})},children:[Object(d.jsxs)(x.a.Field,{children:[Object(d.jsx)("label",{children:"Load Portfolio by Username:"}),Object(d.jsxs)("select",{onChange:function(e){var t=e.target.value;l(O.find((function(e){return e.id==t})))},children:[Object(d.jsx)("option",{selected:!0,value:0,disabled:!0}),O.map((function(e,t){return Object(d.jsx)("option",{name:"id",value:e.id,children:e.username},t)}))]})]}),o.password?Object(d.jsxs)(x.a.Field,{children:[Object(d.jsx)("label",{children:"Password:"}),Object(d.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:n.password,onChange:function(e){var t=e.target.name,s=e.target.value;r(Object(f.a)(Object(f.a)({},n),{},Object(m.a)({},t,s)))}})]}):null,Object(d.jsx)(v.a,{type:"submit",color:"blue",children:"Load Portfolio"})]})},I=n(397),E=n(398),T=n(391),q=n(392);var A=function(){var e=Object(s.useContext)(b),t=Object(i.a)(e,1)[0];return Object(d.jsx)(I.a,{centered:!0,columns:3,children:Object(d.jsx)(I.a.Column,{children:Object(d.jsxs)(E.a,{children:[t.isLoggedIn?null:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(T.a,{position:"left",children:Object(d.jsx)(E.a,{children:Object(d.jsx)(C,{})})}),Object(d.jsx)(T.a,{position:"right",children:Object(d.jsx)(E.a,{children:Object(d.jsx)(P,{})})})]}),Object(d.jsx)("h3",{children:Object(d.jsx)("i",{children:"Flatiron School - SE Flex - Phase 2 - Portfolio App"})}),Object(d.jsx)(q.a,{horizontal:!0,children:"o"}),Object(d.jsx)("div",{children:t.isLoggedIn?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["Welcome back: ",t.username]}),Object(d.jsx)("br",{}),"You are currently watching:",Object(d.jsx)("ul",{children:t.stocks.map((function(e,t){return Object(d.jsx)("li",{children:e},t)}))})]}):Object(d.jsx)("p",{children:"Create a new portfolio or select an existing portfolio!"})})]})})})},R=n(243),L=n(245),N=n(20),F=n(246);var U=function(e){N.d.register(N.c,N.i,N.k,N.h,N.o,N.p,N.f);var t={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"".concat(e.stockName," - Time Series Chart - INTRADAY")}}},n={labels:Object(p.a)(e.labels),datasets:[{label:"".concat(e.stockName),data:Object(p.a)(e.data),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return Object(d.jsx)(F.a,{options:t,data:n})},M=n(140);var Y=function(){var e=Object(s.useContext)(b),t=Object(i.a)(e,1)[0],n=Object(s.useState)([]),r=Object(i.a)(n,2),a=r[0],c=r[1];return Object(s.useEffect)((function(){var e=[];try{Promise.all(t.stocks.map((function(e){return fetch("https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&interval=5min&apikey=".concat(M,"&symbol=")+e).then((function(e){return e.json()})).then((function(e){return e}))}))).then((function(t){return e.push(t)})).then((function(){c(Object(p.a)(e[0]))}))}catch(n){console.error(n)}}),[t.stocks]),Object(d.jsxs)("div",{children:[Object(d.jsx)(q.a,{horizontal:!0}),Object(d.jsx)("h3",{children:"Portfolio Page"}),Object(d.jsx)(q.a,{horizontal:!0}),a!==[]?Object(d.jsx)(R.a,{centered:!0,itemsPerRow:2,children:a.map((function(e,t){return Object(d.jsxs)(L.a,{children:[Object(d.jsx)(L.a.Content,{children:e["Meta Data"]["2. Symbol"]}),Object(d.jsx)(L.a.Content,{children:Object(d.jsx)(U,{stockName:e["Meta Data"]["2. Symbol"],labels:Object.keys(e["Time Series (5min)"]).map((function(e){return e.split(" ")[1]})).reverse(),data:Object.keys(e["Time Series (5min)"]).map((function(t){return e["Time Series (5min)"]["".concat(t)]["4. close"]})).reverse()})})]},t)}))}):Object(d.jsx)("p",{children:"Your portfolio is currently empty!"})]})};var D=function(e){var t=Object(s.useState)(null),n=Object(i.a)(t,2),r=n[0],a=n[1],c=Object(s.useState)(null),o=Object(i.a)(c,2),l=o[0],u=o[1];return Object(s.useEffect)((function(){if(""===e)return null;var t="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&interval=5min&apikey=".concat(M,"&symbol=");fetch(t+e).then((function(e){return e.json()})).then((function(e){a(e),u(e["Meta Data"]["2. Symbol"])}))}),[e]),[r,l]};var J=function(){var e=Object(s.useContext)(b),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(""),c=Object(i.a)(a,2),o=c[0],l=c[1],u=D(o),O=Object(i.a)(u,2),h=O[0],m=O[1],x=Object(s.useState)(!1),g=Object(i.a)(x,2),w=g[0],S=g[1],k=Object(s.useState)({searchString:""}),C=Object(i.a)(k,2),y=C[0],P=C[1];function I(e){return"Enter"!==e.key||""===y.searchString?null:void l(y.searchString)}var E="https://dry-lowlands-31397.herokuapp.com/users/".concat(n.id);return Object(d.jsxs)(L.a,{centered:!0,color:"olive",fluid:w,children:[Object(d.jsx)(L.a.Header,{textAlign:"center",children:Object(d.jsxs)(j.a,{action:!0,onKeyPress:I,placeholder:"Enter Stock Name Here...",fluid:!0,value:y.searchString,onChange:function(e){return P(Object(f.a)(Object(f.a)({},y),{},{searchString:e.target.value.toUpperCase()}))},children:[Object(d.jsx)("input",{}),Object(d.jsx)(v.a,{basic:!0,color:"green",onClick:I,children:"Search"})]})}),h?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(U,{stockName:m,labels:Object.keys(h["Time Series (5min)"]).map((function(e){return e.split(" ")[1]})).reverse(),data:Object.keys(h["Time Series (5min)"]).map((function(e){return h["Time Series (5min)"]["".concat(e)]["4. close"]})).reverse()}),Object(d.jsx)(L.a.Content,{textAlign:"center"}),Object(d.jsx)(L.a.Content,{extra:!0,children:Object(d.jsxs)("div",{className:"ui two buttons",children:[Object(d.jsx)(v.a,{basic:!0,color:"green",onClick:function(){fetch(E,{headers:{"Content-Type":"application/json"},method:"PATCH",body:JSON.stringify({stocks:[].concat(Object(p.a)(n.stocks),[m])})}).then((function(){return r(Object(f.a)(Object(f.a)({},n),{},{stocks:[].concat(Object(p.a)(n.stocks),[m])}))})).catch((function(e){return console.error(e)}))},children:"Add Stock to Porfolio"}),Object(d.jsx)(v.a,{basic:!0,color:"grey",onClick:function(){return S(!w)},children:w?"Collapse":"Expand"})]})})]}):null]})};var H=function(){var e=[{name:"home",path:"/",loggedInRequired:!1,component:A},{name:"portfolio",path:"/portfolio",loggedInRequired:!0,component:Y},{name:"stock",path:"/stock",loggedInRequired:!0,component:J}],t=Object(s.useContext)(b),n=Object(i.a)(t,1)[0];return Object(d.jsxs)("div",{children:[Object(d.jsx)(h,{links:e}),Object(d.jsx)(q.a,{horizontal:!0}),Object(d.jsx)(l.c,{children:e.map((function(e,t){return Object(d.jsx)(l.a,{exact:!0,path:e.path,component:e.component,children:e.loggedInRequired&&n.isLoggedIn?null:Object(d.jsx)(A,{})},t)}))})]})};c.a.render(Object(d.jsx)(o.a,{children:Object(d.jsx)(O,{children:Object(d.jsx)(H,{})})}),document.getElementById("root"))}},[[377,1,2]]]);
//# sourceMappingURL=main.15dd481f.chunk.js.map